{
    "collab_server" : "",
    "contents" : "#From this point on:\n#\n#Everything that exists is an object.\n#Everything that happens is a function call.\n\nsetwd(\"D:/Share Point/OneDrive/Comprehensive Exam - Data files/SSLC Data\")\n\nlibrary(foreign)\nlibrary(stargazer)\nlibrary(plyr)\nlibrary(reshape)\n\noptions(scipen = 999, digits=2)\nFiles <- list.files(pattern = \"*.csv\")\n\n#Initializing Functions\nna.zero <- function (x) {\n  x[is.na(x)] <- 999\n  return(x)\n}\n\nk <- data.frame(matrix(0, nrow = 9, ncol = 9))\nk[,1:8] <- c(4, 23, 31, 39, 47, 58, 66, 81, 82)\nk[,9] <- c(6, 28, 32, 34, 37, 40, 43, 19, 20)\n\nYear <- c(2005:2013)\nexclude <- c(0:150)\n\nData <- ldply(lapply(Files[1], read.csv))\nData <- Data[,k[,1]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset <- list()\nDataset[[1]] <- AggData\n\nData <- ldply(lapply(Files[2], read.csv))\nData <- Data[,k[,2]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset[[2]] <- AggData\n\nData <- ldply(lapply(Files[3], read.csv))\nData <- Data[,k[,3]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset[[3]] <- AggData\n\nData <- ldply(lapply(Files[4], read.csv))\nData <- Data[,k[,4]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset[[4]] <- AggData\n\nData <- ldply(lapply(Files[5], read.csv))\nData <- Data[,k[,5]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset[[5]] <- AggData\n\nData <- ldply(lapply(Files[6], read.csv))\nData <- Data[,k[,6]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset[[6]] <- AggData\n\nData <- ldply(lapply(Files[7], read.csv))\nData <- Data[,k[,7]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset[[7]] <- AggData\n\nData <- ldply(lapply(Files[8], read.csv))\nData <- Data[,k[,8]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset[[8]] <- AggData\n\nData <- ldply(lapply(Files[9], read.csv))\nData <- Data[,k[,9]]\ncolnames(Data) <- c(\"School.Code\", \"Marks1\", \"Marks2\", \"Marks3\", \"Marks4\", \"Marks5\", \"Marks6\", \"Total\", \"Result\")\nData <- na.zero(Data)\ntest <- Data\nfor(i in 2:7){\n  test <- droplevels(subset(test, eval(is.element(test[,i], exclude))))  \n}\n\nAggData <- aggregate(test, by = list(test$School.Code), mean)[,-2]\ncolnames(AggData)[1] <- \"School.Code\"\n\nDataset[[9]] <- AggData\n\nfor(i in 1:9){\n  Dataset[[i]]$Year <- Year[i]\n}\n\nData <- ldply(Dataset)\nsetwd(\"D:/Share Point/OneDrive/GitHub/greek-salad\")\nwrite.csv(Data, \"sslc_school.csv\")\n",
    "created" : 1467217262896.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3743362586",
    "id" : "54195126",
    "lastKnownWriteTime" : 1467359993,
    "last_content_update" : 1467359993193,
    "path" : "D:/Share Point/OneDrive/GitHub/greek-salad/SSLCPrep.R",
    "project_path" : "SSLCPrep.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}